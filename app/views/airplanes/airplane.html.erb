<div class="container-fluid">
  <div class="row">
    <h2>Airline Dashboard</h2>
  </div>
  <hr>
  <div class="row">
    <% if current_user.admin? %>
        <div class="mini-nav">
          <ul>
            <li class="btn btn-default"><%= link_to 'airplanes' %></li>
            <li class="btn btn-default"><%= link_to 'flights' %></li>
            <li class="btn btn-default"><%= link_to 'reservations' %></li>
          </ul>
        </div>
    <% end %>

    <% if current_user && !current_user.admin %>
        <div class="mini-nav">
          <ul>
            <li><%= link_to 'reservations' %></li>
          </ul>
        </div>
    <% end %>
  </div>
  <div class="row">
    <div class="page">



    </div>
  </div>

</div>

<script type="text/template" id="airplane-list-template">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-6 col-md-offset-1">
        <a href="#/new" class="btn btn-default">Create Plane</a>
        <hr>
        <table class="table table-responsive table-striped">
          <thead>
            <tr>
              <th>Name</th>
              <th>Rows</th>
              <th>Columns</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <%% _.each(airplanes, function(airplane) { %>

              <tr>
                <td><%%= airplane.get('name') %></td>
                <td><%%= airplane.get('rows') %></td>
                <td><%%= airplane.get('columns') %></td>
                <td><a href="#/edit/<%%= airplane.get('id') %>" class="text-notice">Edit</a>/<a href="#/delete/<%%= airplane.get('id') %>" class="text-danger">Delete</a></td>
              </tr>
            <%% }); %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</script>

<script type="text/template" id="airplane-form-template">
        <div class="container">
            <div class="row">
                <div class="col-md-4 col-md-offset-2">
                    <%% if(airplane) { %>
                        <h4> Edit Airplane </h4>
                    <%% }else{ %>
                        <h4> New Airplane </h4>
                    <%% } %>
                    <hr/>
                    <form class="edit-airplane-form">
                        <div class="form-group">
                            <input type="text" name="name" id="name" value='<%%= airplane?airplane.get("name"):"" %>' class="form-control" placeholder="Name" autofocus/>
                        </div>
                        <div class="form-group">
                            <input type="number" name="rows" id="rows" value='<%%= airplane?airplane.get("rows"):"" %>' class="form-control" placeholder="Rows"/>
                        </div>
                        <div class="form-group">
                            <input type="number" name="columns" id="columns" value='<%%= airplane?airplane.get("columns"):"" %>' class="form-control" placeholder="Columns"/>
                        </div>

                            <%% if(airplane) { %>
                               <input type="hidden" name="id" value='<%%= airplane.get("id") %>' />
                               <button type="submit" class="btn btn-primary pull-right">Update Airplane</button>
                            <%% }else{ %>
                                <button type="submit" class="btn btn-primary pull-right">Create Airplane</button>
                            <%% } %>

                        </div>
                    </form>
            </div>
        </div>
    </script>

<script type="text/javascript">

    $(document).ready(function(){

        // Views
        App.airplaneList = new App.AirplaneListView();
        App.airplaneForm = new App.AirplaneFormView();
        App.airplaneDelete = new App.AirplaneDeleteView();


        // Router Initialize
         App.airplaneRouter = new App.AirplaneRouter();

        // Router Home Navigation
        App.airplaneRouter.on('route:home',function(){
            App.airplaneList.render();
        });

        //New and Create Airplane
        App.airplaneRouter.on('route:editairplane',function(id){
            App.airplaneForm.render({id: id});
        });

        // Delete Airplane
        App.airplaneRouter.on('route:deleteairplane',function(id){
            App.airplaneDelete.render({id:id});
        });

        try {
            Backbone.history.start();
        } catch(err) {
            Backbone.history.loadUrl();
        }
    });

</script>